<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Ajedrez</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://unpkg.com/cm-chessboard@3.5.2/dist/cm-chessboard.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/cm-chessboard@3.5.2/dist/cm-chessboard.min.css"/>
    <style>
        .board-container {
            width: 400px;
            height: 400px;
            margin: 0 auto;
            margin-top: 50px;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        .controls button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background-color: #2f3542;
            color: white;
            border: none;
            border-radius: 4px;
        }
        .controls button:hover {
            background-color: #3f4658;
        }
    </style>
</head>
<body>
    <div class="board-container">
        <div id="board"></div>
    </div>
    <div class="controls">
        <button id="prev">Anterior</button>
        <button id="next">Siguiente</button>
    </div>

    <script>
        const exercises = [
            {
                pgn: '[Event "Tactic 1"]\n[FEN "rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR b KQkq - 0 1"]\n\n1. e4 ...',
                solution: ['e4', 'd5', 'exd5', 'Qxd5', 'Nc3', 'Qa5', 'd4', 'Nf6']
            },
            {
                pgn: '[Event "Tactic 2"]\n[FEN "r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 0 1"]\n\n...',
                solution: ['...']
            }
        ];

        let currentExercise = 0;
        let board;
        let chess;

        document.addEventListener('DOMContentLoaded', function() {
            chess = new Chess();
            board = new Chessboard(document.getElementById("board"), {
                position: "start",
                style: {
                    cssClass: "default",
                    showCoordinates: true,
                    pieces: { file: "pieces/standard.svg" }
                }
            });
            
            loadExercise(currentExercise);
        });

        function loadExercise(index) {
            const exercise = exercises[index];
            const fen = exercise.pgn.match(/\[FEN "(.*?)"\]/)[1];
            chess.load(fen);
            board.setPosition(fen);
        }

        document.getElementById('prev').addEventListener('click', () => {
            if (currentExercise > 0) {
                currentExercise--;
                loadExercise(currentExercise);
            }
        });

        document.getElementById('next').addEventListener('click', () => {
            if (currentExercise < exercises.length - 1) {
                currentExercise++;
                loadExercise(currentExercise);
            }
        });
    </script>
</body>
</html>